
<!DOCTYPE html>
<html lang="en-NL">
    <head>
        <title>frelder</title>
        <link rel="stylesheet" type="text/css" href="/static/frelder.css">
        <script src="/static/event_stream.js"></script>
    </head>
    <body>
        <!-- not friendly for elder but nice to see -->
        <textarea id="message-history" cols="140" rows="20"></textarea>
        <!-- this hard coded device is created as an example.
                DO NOT hard code devices! -->
        <br><br><button id="toggle" value="woonkamer/schemerlamp">toggle</button>

        <script>
            /** you can do better for sure!
             * choose your own solution, do not take above suggestion
             * for id and value for granted, think for yourself.
             * The button example is probably just there to show you how not to do it.
             * check out the ieee, exposed features ('exposes')
             * and what 'topic' can offer you! */
            document.querySelector('#toggle').onclick = (e) =>  {
                const state = 'toggle';
                const button_topic = document.querySelector('#toggle');
                const topic = button_topic.value;

                payload = {
                    'topic': topic,
                    'feature': {'state': state } };
                const options = {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify( payload )
                };
                
                fetch('http://192.168.0.100:8000/api/set', options)
            };
        </script>
    </body>
</html>
